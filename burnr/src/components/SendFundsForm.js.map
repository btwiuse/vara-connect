{"version":3,"file":"SendFundsForm.js","sourceRoot":"","sources":["../../../src/components/SendFundsForm.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  MouseEvent,\n  useContext,\n  useState,\n  useEffect,\n  FunctionComponent,\n} from \"react\"\nimport BN from \"bn.js\"\nimport {\n  makeStyles,\n  Theme,\n  Button,\n  Typography,\n  LinearProgress,\n  Table,\n  Grid,\n  Box,\n} from \"@material-ui/core\"\nimport { Balance } from \"@polkadot/types/interfaces\"\nimport { Keyring } from \"@polkadot/api\"\nimport { AccountContext } from \"../utils/contexts\"\nimport { InputAddress, InputFunds } from \"../components\"\nimport { useBalance, useApi, useLocalStorage } from \"../hooks\"\nimport { HistoryTableRow } from \".\"\nimport { isValidAddressPolkadotAddress, prettyBalance } from \"../utils/utils\"\nimport { Column } from \"../utils/types\"\nimport { NETWORK } from \"../utils/constants\"\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  errorMessage: {\n    marginBottom: theme.spacing(),\n    textAlign: \"center\",\n  },\n  button: {\n    color: theme.palette.getContrastText(theme.palette.secondary.main),\n    \"&:hover\": {\n      color: theme.palette.getContrastText(theme.palette.secondary.dark),\n    },\n    display: \"block\",\n    margin: \"10px auto\",\n  },\n  transferInfoMessage: {\n    overflowWrap: \"break-word\",\n    padding: \"30px\",\n  },\n  infoRow: {\n    margin: \"30px 0\",\n  },\n  feePriceAndBalance: {\n    height: \"55px\",\n    display: \"flex\",\n    margin: \"0 auto\",\n    justifyContent: \"center\",\n    alignItems: \"baseline\",\n  },\n  title: {\n    paddingRight: \"30px\",\n    opacity: 1,\n  },\n  priceBalance: {\n    backgroundColor: \"#E7FAEC\",\n  },\n  priceFee: {\n    backgroundColor: \"#FFE0DC\",\n  },\n  price: {\n    padding: \"0 10px\",\n    borderRadius: \"2px\",\n    color: \"#1E1E1E\",\n    fontWeight: 90,\n    opacity: 1,\n  },\n  opacityNone: {\n    opacity: 0,\n  },\n}))\n\nconst columns: Column[] = [\n  { id: \"withWhom\", label: \"\", width: 160 },\n  { id: \"extrinsic\", label: \"Extrinsic\" },\n  { id: \"value\", label: \"Value\", minWidth: 170, align: \"right\" },\n  { id: \"status\", label: \"Status\", width: 40, align: \"right\" },\n]\n\ninterface StructureProps {\n  name: string\n  rest: string\n  fee: Balance | undefined\n}\n\nconst Structure = ({ name, rest, fee }: StructureProps) => {\n  const {\n    feePriceAndBalance,\n    opacityNone,\n    title,\n    price,\n    priceBalance,\n    priceFee,\n  } = useStyles()\n\n  return (\n    <div className={feePriceAndBalance}>\n      <div className={!fee ? opacityNone : title}>{name}</div>\n      <div\n        className={\n          !fee\n            ? opacityNone\n            : name === \"Fees\"\n            ? `${price} ${priceFee}`\n            : `${price} ${priceBalance}`\n        }\n      >\n        <Typography variant=\"subtitle1\">{rest}</Typography>\n      </div>\n    </div>\n  )\n}\n\nconst SendFundsForm: FunctionComponent = () => {\n  const classes = useStyles()\n  const { account, setCurrentAccount } = useContext(AccountContext)\n  const balanceArr = useBalance(account.userAddress)\n  const api = useApi()\n  const maxAmountFull = balanceArr[1]\n  const unit = balanceArr[3]\n  // TODO: This must be prettier and reusable (exists already on App)\n  const [endpoint, setEndpoint] = useLocalStorage(\"endpoint\")\n  if (!endpoint) {\n    setEndpoint(Object.keys(NETWORK)[0])\n  }\n  const [, setLocalStorageAccount] = useLocalStorage(\n    endpoint.split(\"-\")[0]?.toLowerCase(),\n  )\n  // TODO END: This must be prettier and reusable (exists already on App)\n  const [address, setAddress] = useState<string>(\"\")\n  const [amount, setAmount] = useState<string>(\"0\")\n  const [fundsIssue, setFundsIssue] = useState<boolean>(false)\n  const [loading, setLoading] = useState<boolean>(false)\n  const [message, setMessage] = useState<string>(\"\")\n  const [countdownNo, setCountdownNo] = useState<number>(0)\n  const [rowStatus, setRowStatus] = useState<number>(0)\n  const [fee, setFee] = useState<Balance | undefined>()\n  const [errorMsg, setErrorMsg] = useState<string>(\"\")\n\n  useEffect((): void => {\n    const calcFee = async (): Promise<void> => {\n      const keyring = new Keyring({ type: \"sr25519\" })\n      const sender = keyring.addFromUri(account.userSeed)\n      const fee = await api.tx.balances\n        .transfer(address, new BN(amount))\n        .paymentInfo(sender)\n      setFee(fee.partialFee)\n    }\n    !amount ||\n    amount === \"0\" ||\n    !isValidAddressPolkadotAddress(address) ||\n    !account.userSeed\n      ? setFee(undefined)\n      : void calcFee()\n  }, [amount, account.userSeed, address, api.tx.balances])\n\n  useEffect((): (() => void) => {\n    let countdown: ReturnType<typeof setInterval>\n    if (!loading) {\n      if (message !== \"\") {\n        countdown = setInterval((): void => {\n          setCountdownNo((oldCountdownNo: number) => {\n            if (oldCountdownNo === 0) {\n              setMessage(\"\")\n              return 0\n            } else {\n              return oldCountdownNo - 1\n            }\n          })\n        }, 100)\n      }\n    }\n    return () => {\n      clearInterval(countdown)\n    }\n  }, [loading, message, setMessage])\n\n  const handleSubmit = async (e: MouseEvent) => {\n    try {\n      e.preventDefault()\n      setLoading(true)\n      setCountdownNo(100)\n      setRowStatus(3)\n      const keyring = new Keyring({ type: \"sr25519\" })\n      const sender = keyring.addFromUri(account.userSeed)\n      await api.tx.balances\n        .transfer(address, new BN(amount))\n        .signAndSend(sender, (result) => {\n          setMessage(`Current transaction status ${result.status}`)\n          if (result.status.isInBlock) {\n            setMessage(`Transaction Block hash: ${result.status.asInBlock}`)\n          } else if (result.status.isFinalized) {\n            setRowStatus(1)\n            setMessage(`Block hash:: ${result.status.asFinalized}.`)\n            account.userHistory.unshift({\n              withWhom: address,\n              extrinsic: \"Transfer\",\n              value: amount,\n              status: 1,\n            })\n            setCurrentAccount(account)\n            setLocalStorageAccount(JSON.stringify(account))\n          }\n        })\n      setLoading(false)\n    } catch (err) {\n      setLoading(false)\n      setRowStatus(2)\n      setMessage(`ðŸ˜ž Error: ${err}`)\n      account.userHistory.unshift({\n        withWhom: address,\n        extrinsic: \"Transfer\",\n        value: amount,\n        status: 2,\n      })\n      setCurrentAccount(account)\n      setLocalStorageAccount(JSON.stringify(account))\n    }\n  }\n\n  useEffect(() => {\n    maxAmountFull &&\n      amount &&\n      fee &&\n      setFundsIssue(new BN(maxAmountFull).sub(new BN(amount)).sub(fee).isNeg())\n  }, [amount, fee, maxAmountFull])\n\n  useEffect(() => {\n    if (!isValidAddressPolkadotAddress(address)) {\n      setErrorMsg(\"Add a valid address\")\n    } else if (!parseInt(amount)) {\n      setErrorMsg(\"Add some amount\")\n    } else if (fundsIssue) {\n      setErrorMsg(\"Insufficient funds\")\n    } else {\n      setErrorMsg(\"\")\n    }\n  }, [address, amount, fundsIssue])\n\n  return (\n    <>\n      <InputAddress setAddress={setAddress} />\n      <InputFunds\n        hidePercentages\n        total={maxAmountFull}\n        currency={unit}\n        setAmount={setAmount}\n      />\n      <Grid item xs={12} className={classes.infoRow}>\n        <Structure\n          fee={fee}\n          name=\"Fees\"\n          rest={fee ? `${prettyBalance(fee)} ${unit}` : \"\"}\n        />\n        <Structure\n          fee={fee}\n          name=\"Balance after transaction\"\n          rest={\n            fee\n              ? `${prettyBalance(\n                  new BN(maxAmountFull).sub(new BN(amount)).sub(fee),\n                )} ${unit}`\n              : \"\"\n          }\n        />\n      </Grid>\n      <Button\n        type=\"submit\"\n        variant=\"contained\"\n        size=\"large\"\n        color=\"secondary\"\n        disabled={\n          loading ||\n          !parseInt(amount) ||\n          !isValidAddressPolkadotAddress(address) ||\n          account.userAddress === address ||\n          fundsIssue\n        }\n        onClick={handleSubmit}\n        className={classes.button}\n      >\n        Send\n      </Button>\n\n      {errorMsg && (\n        <Typography\n          variant=\"body2\"\n          color=\"error\"\n          className={classes.errorMessage}\n        >\n          {errorMsg}\n        </Typography>\n      )}\n\n      <Box mt={3}>\n        {countdownNo !== 0 && (\n          <Table size=\"small\">\n            <HistoryTableRow\n              row={{\n                withWhom: address,\n                extrinsic: \"Transfer\",\n                value: amount,\n                status: rowStatus,\n              }}\n              unit={unit}\n              columns={columns}\n            />\n          </Table>\n        )}\n        <Typography variant=\"subtitle2\" className={classes.transferInfoMessage}>\n          {message}\n        </Typography>\n        {!loading && countdownNo !== 0 && (\n          <LinearProgress variant=\"determinate\" value={countdownNo} />\n        )}\n      </Box>\n    </>\n  )\n}\n\nexport default SendFundsForm\n"]}