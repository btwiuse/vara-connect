import { uniqueNamesGenerator, starWars } from "unique-names-generator";
import { mnemonicGenerate } from "@polkadot/util-crypto";
import { Keyring } from "@polkadot/api";
import { decodeAddress, encodeAddress } from "@polkadot/keyring";
import { hexToU8a, isHex } from "@polkadot/util";
import { formatBalance } from "@polkadot/util";
import { NETWORK } from "./constants";
const keyring = new Keyring({ type: "sr25519" });
const config = {
    dictionaries: [starWars],
};
export const getName = (account) => `${account.name}`;
export const openInNewTab = (url) => {
    const newWindow = window.open(url, "_blank", "noopener,noreferrer");
    if (newWindow)
        newWindow.opener = null;
};
export const downloadFile = (fileName, data, type) => {
    const anchor = window.document.createElement("a");
    anchor.href = window.URL.createObjectURL(new Blob([data], { type: `application/${type}` }));
    anchor.download = `${type === "txt" ? "seedphrase-" : ""}${fileName}.${type}`;
    document.body.appendChild(anchor);
    anchor.click();
    document.body.removeChild(anchor);
    window.URL.revokeObjectURL(anchor.href);
};
export const createLocalStorageAccount = () => {
    const mnemonic = mnemonicGenerate(12);
    const pair = keyring.addFromMnemonic(mnemonic, { name: uniqueNamesGenerator(config) }, "sr25519");
    return {
        userAddress: pair.address,
        userName: pair.meta.name || "____ _____",
        userSeed: mnemonic,
        userJson: pair.toJson,
        userHistory: [],
    };
};
export const isEmpty = (obj) => typeof obj === "object" &&
    obj !== null &&
    Object.keys(obj).length === 0 &&
    obj.constructor === Object;
export const copyToClipboard = (text) => {
    const dummy = document.createElement("textarea");
    document.body.appendChild(dummy);
    dummy.value = text;
    dummy.select();
    document.execCommand("copy");
    document.body.removeChild(dummy);
};
export const getKeyring = () => keyring;
export const transformCurrency = (currencyLevel, currency) => (currencyLevel !== "-" ? currencyLevel.concat(currency) : currency);
export const isValidAddressPolkadotAddress = (address = "") => {
    try {
        encodeAddress(isHex(address) ? hexToU8a(address.toString()) : decodeAddress(address));
        return true;
    }
    catch (error) {
        return false;
    }
};
/*
 * format once with @polkadot/util formatBalance,
 * then strip the trailing Unit and make it to 2 decimal points
 */
export const prettyBalance = (rawBalance) => {
    if ((typeof rawBalance === "number" && rawBalance === 0) || !rawBalance) {
        return "0";
    }
    else if (rawBalance.toString() === "0") {
        return rawBalance.toString();
    }
    // Use `api.registry.chainDecimals` instead of decimals
    const firstPass = formatBalance(rawBalance, {
        decimals: 12,
        forceUnit: "-",
        withSi: false,
    });
    return firstPass.slice(0, firstPass.length - 1);
};
export const humanReadable = (amnt, api) => (amnt / Math.pow(10, api.registry.chainDecimals[0])).toFixed(4);
export const validateLocalstorage = () => {
    // expected acceptable values of localStorage.
    // Add type info to avoid having to cast
    const expectedValues = {
        theme: ["true", "false"],
        balanceVisibility: ["true", "false"],
        endpoint: [NETWORK.id],
    };
    Object.keys(expectedValues).forEach((key) => {
        if (!Object.keys(localStorage).includes(key)) {
            return;
        }
        if (!expectedValues[key].includes(localStorage[key])) {
            localStorage.removeItem(key);
        }
    });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbHMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLG9CQUFvQixFQUFVLFFBQVEsRUFBRSxNQUFNLHdCQUF3QixDQUFBO0FBQy9FLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHVCQUF1QixDQUFBO0FBQ3hELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxlQUFlLENBQUE7QUFDdkMsT0FBTyxFQUFFLGFBQWEsRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQTtBQUNoRSxPQUFPLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFBO0FBRWhELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQTtBQUc5QyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sYUFBYSxDQUFBO0FBRXJDLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLENBQUE7QUFFaEQsTUFBTSxNQUFNLEdBQVc7SUFDckIsWUFBWSxFQUFFLENBQUMsUUFBUSxDQUFDO0NBQ3pCLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxPQUFnQixFQUFVLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQTtBQUV0RSxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxHQUFXLEVBQVEsRUFBRTtJQUNoRCxNQUFNLFNBQVMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxRQUFRLEVBQUUscUJBQXFCLENBQUMsQ0FBQTtJQUNuRSxJQUFJLFNBQVM7UUFBRSxTQUFTLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQTtBQUN4QyxDQUFDLENBQUE7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FDMUIsUUFBZ0Is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