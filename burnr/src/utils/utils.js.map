{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/utils/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import { ApiPromise } from \"@polkadot/api\"\nimport { Account, LocalStorageAccountCtx } from \"./types\"\nimport { uniqueNamesGenerator, Config, starWars } from \"unique-names-generator\"\nimport { mnemonicGenerate } from \"@polkadot/util-crypto\"\nimport { Keyring } from \"@polkadot/api\"\nimport { decodeAddress, encodeAddress } from \"@polkadot/keyring\"\nimport { hexToU8a, isHex } from \"@polkadot/util\"\nimport { KeyringPair$Json } from \"@polkadot/keyring/types\"\nimport { formatBalance } from \"@polkadot/util\"\nimport type { Balance } from \"@polkadot/types/interfaces\"\nimport BN from \"bn.js\"\nimport { NETWORK } from \"./constants\"\n\nconst keyring = new Keyring({ type: \"sr25519\" })\n\nconst config: Config = {\n  dictionaries: [starWars],\n}\n\nexport const getName = (account: Account): string => `${account.name}`\n\nexport const openInNewTab = (url: string): void => {\n  const newWindow = window.open(url, \"_blank\", \"noopener,noreferrer\")\n  if (newWindow) newWindow.opener = null\n}\n\nexport const downloadFile = (\n  fileName: string,\n  data: string,\n  type: string,\n): void => {\n  const anchor = window.document.createElement(\"a\")\n  anchor.href = window.URL.createObjectURL(\n    new Blob([data], { type: `application/${type}` }),\n  )\n  anchor.download = `${type === \"txt\" ? \"seedphrase-\" : \"\"}${fileName}.${type}`\n  document.body.appendChild(anchor)\n  anchor.click()\n  document.body.removeChild(anchor)\n  window.URL.revokeObjectURL(anchor.href)\n}\n\nexport const createLocalStorageAccount = (): LocalStorageAccountCtx => {\n  const mnemonic = mnemonicGenerate(12)\n  const pair = keyring.addFromMnemonic(\n    mnemonic,\n    { name: uniqueNamesGenerator(config) },\n    \"sr25519\",\n  )\n  return {\n    userAddress: pair.address,\n    userName: (pair.meta.name as string) || \"____ _____\",\n    userSeed: mnemonic,\n    userJson: pair.toJson as unknown as KeyringPair$Json,\n    userHistory: [],\n  }\n}\n\nexport const isEmpty = (obj: unknown): boolean =>\n  typeof obj === \"object\" &&\n  obj !== null &&\n  Object.keys(obj).length === 0 &&\n  obj.constructor === Object\n\nexport const copyToClipboard = (text: string): void => {\n  const dummy = document.createElement(\"textarea\")\n  document.body.appendChild(dummy)\n  dummy.value = text\n  dummy.select()\n  document.execCommand(\"copy\")\n  document.body.removeChild(dummy)\n}\n\nexport const getKeyring = (): Keyring => keyring\n\nexport const transformCurrency = (\n  currencyLevel: string,\n  currency: string,\n): string => (currencyLevel !== \"-\" ? currencyLevel.concat(currency) : currency)\n\nexport const isValidAddressPolkadotAddress = (address = \"\"): boolean => {\n  try {\n    encodeAddress(\n      isHex(address) ? hexToU8a(address.toString()) : decodeAddress(address),\n    )\n\n    return true\n  } catch (error) {\n    return false\n  }\n}\n\n/*\n * format once with @polkadot/util formatBalance,\n * then strip the trailing Unit and make it to 2 decimal points\n */\nexport const prettyBalance = (rawBalance: Balance | BN | number): string => {\n  if ((typeof rawBalance === \"number\" && rawBalance === 0) || !rawBalance) {\n    return \"0\"\n  } else if (rawBalance.toString() === \"0\") {\n    return rawBalance.toString()\n  }\n  // Use `api.registry.chainDecimals` instead of decimals\n  const firstPass = formatBalance(rawBalance, {\n    decimals: 12,\n    forceUnit: \"-\",\n    withSi: false,\n  })\n\n  return firstPass.slice(0, firstPass.length - 1)\n}\n\nexport const humanReadable = (amnt: number, api: ApiPromise): string =>\n  (amnt / Math.pow(10, api.registry.chainDecimals[0])).toFixed(4)\n\nexport const validateLocalstorage = (): void => {\n  // expected acceptable values of localStorage.\n  // Add type info to avoid having to cast\n  const expectedValues: Record<string, string[]> = {\n    theme: [\"true\", \"false\"],\n    balanceVisibility: [\"true\", \"false\"],\n    endpoint: [NETWORK.id],\n  }\n\n  Object.keys(expectedValues).forEach((key) => {\n    if (!Object.keys(localStorage).includes(key)) {\n      return\n    }\n\n    if (!expectedValues[key].includes(localStorage[key] as string)) {\n      localStorage.removeItem(key)\n    }\n  })\n}\n"]}